(function(){var a;a=this.jQuery,a.fn.extend({confirmWithReveal:function(b){var c,d,e,f;return null==b&&(b={}),c={modal_class:"medium",title:"Are you sure?",title_class:"",body:"This action cannot be undone.",body_class:"",password:!1,prompt:"Type <strong>%s</strong> to continue:",footer_class:"",ok:"Confirm",ok_class:"button alert",cancel:"Cancel",cancel_class:"button secondary"},f=a.extend({},c,b),d=function(b){var c,d,e,g,h,i,j,k;if(g=b.data("confirm"),null==b.attr("data-confirm"))return!0;if("string"==typeof g&&g.length>0){g=g.replace(/'/g,'"');var l=g;try{g=JSON.parse(g)}catch(a){g=l}}return"string"==typeof g&&g.length>0?((null!=(k=a.rails)?k.confirm:void 0)||window.confirm).call(window,g):(i=function(a){return g[a]||f[a]},h=a("<div data-reveal class='reveal "+i("modal_class")+"' id='confirm-dialog'>\n  <h2 data-confirm-title class='"+i("title_class")+"'></h2>\n  <p data-confirm-body class='"+i("body_class")+"'></p>\n  <div data-confirm-footer class='"+i("footer_class")+"'>\n    <a data-confirm-cancel class='"+i("cancel_class")+"'></a>\n  </div>\n</div>"),c=b.is("a")?b.clone():a("<a/>"),c.removeAttr("data-confirm").attr("class",i("ok_class")).html(i("ok")).on("click",function(c){return!a(this).prop("disabled")&&(b.trigger("confirm.reveal",c),b.is("form, :input, button")?(h.foundation("close"),$form=b.closest("form"),$form.off("submit"),b.off("submit"),$form.removeAttr("data-confirm").submit()):(h.foundation("close"),!1))}),h.find("[data-confirm-title]").html(i("title")),h.find("[data-confirm-body]").html(i("body")),h.find("[data-confirm-cancel]").html(i("cancel")).on("click",function(a){return h.foundation("close"),b.trigger("cancel.reveal",a)}),h.find("[data-confirm-footer]").append(c),(j=i("password"))&&(e=i("prompt").replace("%s",j),d="<label>\n  "+e+"\n  <input data-confirm-password type='text'/>\n</label>",h.find("[data-confirm-body]").after(a(d)),h.find("[data-confirm-password]").on("keyup",function(b){var d;return d=a(this).val()!==j,c.toggleClass("disabled",d).prop("disabled",d)}).trigger("keyup")),h.appendTo(a("body")).foundation().foundation("open").on("closed.fndtn.reveal",function(a){return h.remove()}),!1)},a.rails?(a.rails.allowAction=function(b){return d(a(b))},a(this)):(e=function(b){if(!d(a(this)))return b.preventDefault(),b.stopImmediatePropagation()},this.each(function(){var b;return b=a(this),b.on("click","a[data-confirm], :input[data-confirm]",e),b.on("submit","form[data-confirm]",e),b}))}})}).call(this);